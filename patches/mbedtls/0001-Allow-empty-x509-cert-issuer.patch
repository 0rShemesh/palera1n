From 2c8190847d4bd07db579bdea954d44fcf506a926 Mon Sep 17 00:00:00 2001
From: Nick Chan <towinchenmi@gmail.com>
Date: Sat, 27 May 2023 20:54:54 +0800
Subject: [PATCH] Allow empty x509 cert issuer

---
 library/x509_crt.c | 11 -----------
 1 file changed, 11 deletions(-)

diff --git a/library/x509_crt.c b/library/x509_crt.c
index cf62532f2..a753b0aec 100644
--- a/library/x509_crt.c
+++ b/library/x509_crt.c
@@ -1059,17 +1059,6 @@ static int x509_crt_parse_der_core(mbedtls_x509_crt *crt,
      */
     crt->issuer_raw.p = p;
 
-    if ((ret = mbedtls_asn1_get_tag(&p, end, &len,
-                                    MBEDTLS_ASN1_CONSTRUCTED | MBEDTLS_ASN1_SEQUENCE)) != 0) {
-        mbedtls_x509_crt_free(crt);
-        return MBEDTLS_ERROR_ADD(MBEDTLS_ERR_X509_INVALID_FORMAT, ret);
-    }
-
-    if ((ret = mbedtls_x509_get_name(&p, p + len, &crt->issuer)) != 0) {
-        mbedtls_x509_crt_free(crt);
-        return ret;
-    }
-
     crt->issuer_raw.len = p - crt->issuer_raw.p;
 
     /*
-- 
2.39.1

